<?xml version="1.0" encoding="UTF-8"?>
<schema name="rubygems" version="0.1">
  <types>
    
    <fieldType name="text" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPorterFilterFactory"/>
      </analyzer>
    </fieldType>
    
    <fieldType name="text_ngram" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.StandardTokenizerFactory"/>
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="3" maxGramSize="15" side="front"/>
      </analyzer>
    </fieldType>
    
    <fieldType name="name" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.PatternTokenizerFactory" pattern="-_" />
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
    
    <fieldType name="name_ngram" class="solr.TextField" omitNorms="false">
      <analyzer>
        <tokenizer class="solr.PatternTokenizerFactory" pattern="-_" />
        <filter class="solr.StandardFilterFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
    </fieldType>
    
    <fieldType name="boolean" class="solr.BoolField" omitNorms="true"/>
    <fieldType name="date"    class="solr.DateField" omitNorms="true"/>
    <fieldType name="rand"    class="solr.RandomSortField" omitNorms="true"/>
    <fieldType name="sdouble" class="solr.SortableDoubleField" omitNorms="true"/>
    <fieldType name="sfloat"  class="solr.SortableFloatField" omitNorms="true"/>
    <fieldType name="sint"    class="solr.SortableIntField" omitNorms="true"/>
    <fieldType name="slong"   class="solr.SortableLongField" omitNorms="true"/>
    <fieldType name="string"  class="solr.StrField" omitNorms="true"/>
    <fieldType name="tdate"   class="solr.TrieDateField" omitNorms="true"/>
    <fieldType name="tdouble" class="solr.TrieDoubleField" omitNorms="true"/>
    <fieldType name="tfloat"  class="solr.TrieFloatField" omitNorms="true"/>
    <fieldType name="tint"    class="solr.TrieIntField" omitNorms="true"/>

  </types>
  
  <fields>
    
    <!--
      Internal fields
    -->
    
    <field name="id"           type="string"     indexed="true" stored="true" multiValued="false" />
    <field name="__id"         type="string"     indexed="true" stored="true" multiValued="false" />
    <field name="__env"        type="string"     indexed="true" stored="true" multiValued="false" />


    <!-- 
      Domain-specific fields
    -->

    <!-- Domain-specific text-based fields -->
    <dynamicField name="*_name"       type="name"       indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_name_ngram" type="name_ngram" indexed="true" stored="true" multiValued="true" />
    <field name="authors"             type="text"       indexed="true" stored="true" multiValued="true" />
    <field name="info"                type="text"       indexed="true" stored="true" multiValued="true" />
    <field name="name"                type="name"       indexed="true" stored="true" multiValued="true" />

    <!-- Domain-specific scalar fields -->
    <dynamicField name="*_uri"      type="string" indexed="true" stored="true" multiValued="true" />
    <field name="downloads"         type="sint"   indexed="true" stored="true" multiValued="true" />
    <field name="version"           type="string" indexed="true" stored="true" multiValued="true" />
    <field name="version_downloads" type="sint"   indexed="true" stored="true" multiValued="true" />


    <!-- 
      Generic convention-based fields
    -->

    <!-- Generic text value dynamic fields -->
    <dynamicField name="*_text"       type="text"       indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_text_ngram" type="text_ngram" indexed="true" stored="true" multiValued="true" />

    <!-- Generic scalar value dynamic fields -->
    <dynamicField name="*_bool"       type="boolean"    indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_date"       type="date"       indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_rand"       type="rand"       indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_sdouble"    type="sdouble"    indexed="true" stored="true" multiValued="false" />
    <dynamicField name="*_sfloat"     type="sfloat"     indexed="true" stored="true" multiValued="false" />
    <dynamicField name="*_sint"       type="sint"       indexed="true" stored="true" multiValued="false" />
    <dynamicField name="*_slong"      type="slong"      indexed="true" stored="true" multiValued="false" />
    <dynamicField name="*_string"     type="string"     indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_tdate"      type="tdate"      indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_tdouble"    type="tdouble"    indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_tfloat"     type="tfloat"     indexed="true" stored="true" multiValued="true" />
    <dynamicField name="*_tint"       type="tint"       indexed="true" stored="true" multiValued="true" />

  </fields>
  
  <uniqueKey>__id</uniqueKey>
  <defaultSearchField>__id</defaultSearchField>
  
</schema>